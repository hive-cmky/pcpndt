<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC & PNDT Dashboard</title>
    <!--Css-->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="css/rev.css">

    <link rel="stylesheet" href="css/energy.css">


<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css"
      integrity="sha512-mR/b5Y7FRsKqrYZou7uysnOdCIJib/7r5QeJMFvLNHNhtye3xJp1TdJVPLtetkukFn227nKpXD9OjUc09lx97Q=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <!-- test new css start -->
    	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.3.2/css/fixedHeader.dataTables.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.4.1/css/responsive.dataTables.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css">
<!--    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.8/css/dataTables.dataTables.css">-->

    <!-- script start -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>-->
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

	<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/fixedheader/3.3.2/js/dataTables.fixedHeader.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.4.1/js/dataTables.responsive.min.js"></script>
	<!-- script end -->
	<script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
	<script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
		   .card-body {
            overflow-x: auto; /* Ensures table fits within card */
        }
        .table {
            width: 100%; /* Ensure table width is 100% */
        }
         .loader {
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
	</style>

    <style type="text/css">
    .iconsize{
    border-radius: 90px;
    }
    .imgsizess
    {
   /* width: 35px; */
    filter: invert(1);
    border-radius: 35px;
   /*
    width: 90px;
    height: 90px;
    background: #257180;
    border-radius: 20px;
    z-index: 0;
    display: inline-flex
;
    align-items: center;
    justify-content: center;
    */
    }
    .appliedtot{
    background: #e8fbff;
    text-align: center;
    border-radius: 20px;
    display: inline-flex
;
    
    width: 100%;
    position: relative;
    border: 1px solid #c7c4c4;
    height: 100%;
    }
   
    .img-fluid
    {
    padding:17px;
    }
    </style>

</head>
-------------------------------------------
/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f8f9fa;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Header Styles */
.header {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.top-bar {
    padding: 15px 0;
    border-bottom: 2px solid #ffd700;
}

.govt-logo {
    display: flex;
    align-items: center;
    gap: 20px;
}

.logo {
    height: 80px;
    width: auto;
    border-radius: 8px;
    border: 2px solid #ffd700;
}

.govt-text h1 {
    font-size: 1.8rem;
    margin-bottom: 5px;
    color: #ffd700;
    font-weight: bold;
}

.govt-text h2 {
    font-size: 1.2rem;
    font-weight: normal;
    color: white;
}

.national-emblem {
    position: absolute;
    right: 20px;
    top: 20px;
}

.emblem {
    height: 60px;
    width: auto;
    filter: brightness(0) invert(1);
}

/* Navigation Bar */
.navbar {
    background: rgba(0, 0, 0, 0.8);
    padding: 0;
}

.navbar .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.nav-menu {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
}

.nav-link {
    color: white;
    text-decoration: none;
    padding: 15px 20px;
    display: block;
    transition: all 0.3s ease;
    border-right: 1px solid rgba(255,255,255,0.1);
}

.nav-link:hover {
    background: #2a5298;
    color: #ffd700;
}

.nav-link i {
    margin-right: 8px;
}

.auth-buttons {
    display: flex;
    gap: 10px;
}

.btn-login, .btn-register {
    padding: 8px 16px;
    border-radius: 4px;
    text-decoration: none;
    font-weight: bold;
    transition: all 0.3s ease;
}

.btn-login {
    background: transparent;
    border: 2px solid #ffd700;
    color: #ffd700;
}

.btn-register {
    background: #ffd700;
    border: 2px solid #ffd700;
    color: #1e3c72;
}

.btn-login:hover, .btn-register:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

/* Main Content */
.main-content {
    min-height: calc(100vh - 200px);
    padding: 30px 0;
}

.content-wrapper {
    background: white;
    padding: 30px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.page-title {
    color: #1e3c72;
    border-bottom: 3px solid #ffd700;
    padding-bottom: 10px;
    margin-bottom: 30px;
    font-size: 2rem;
}

/* Footer Styles */
.footer {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    padding: 40px 0 20px;
    margin-top: 50px;
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    margin-bottom: 30px;
}

.footer-section h3 {
    color: #ffd700;
    margin-bottom: 15px;
    font-size: 1.2rem;
}

.footer-section ul {
    list-style: none;
}

.footer-section ul li {
    margin-bottom: 8px;
}

.footer-section ul li a {
    color: white;
    text-decoration: none;
    transition: color 0.3s ease;
}

.footer-section ul li a:hover {
    color: #ffd700;
}

.footer-section p {
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.footer-bottom {
    border-top: 1px solid rgba(255,255,255,0.2);
    padding-top: 20px;
    text-align: center;
}

.footer-bottom p {
    margin-bottom: 5px;
    font-size: 0.9rem;
}

/* Responsive Design */
@media (max-width: 768px) {
    .govt-logo {
        flex-direction: column;
        text-align: center;
    }
    
    .logo {
        height: 60px;
    }
    
    .govt-text h1 {
        font-size: 1.4rem;
    }
    
    .govt-text h2 {
        font-size: 1rem;
    }
    
    .national-emblem {
        position: static;
        text-align: center;
        margin-top: 10px;
    }
    
    .navbar .container {
        flex-direction: column;
    }
    
    .nav-menu {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .nav-link {
        padding: 10px 15px;
        font-size: 0.9rem;
    }
    
    .auth-buttons {
        margin-top: 10px;
    }
    
    .footer-content {
        grid-template-columns: 1fr;
        text-align: center;
    }
}

/* Print Styles */
@media print {
    .navbar, .footer {
        display: none;
    }
    
    .main-content {
        margin: 0;
        padding: 0;
    }
}

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form H - Single Page Application</title>
    <style>
        /* Search Section Styles */
        .search-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .filter-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .filter-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .search-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .search-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }

        .loading {
            color: #6c757d;
            font-style: italic;
        }

        /* Results Section Styles */
        .results-section {
            margin-top: 30px;
            display: none;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .new-search-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }

        /* Form Container Styles - A4 OPTIMIZED */
        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border: 1px solid #ccc;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #333;
            padding-bottom: 8px;
        }

        .form-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 3px;
            text-transform: uppercase;
        }

        .form-subtitle {
            font-size: 12px;
            font-style: italic;
            margin-bottom: 8px;
        }

        .page-info {
            text-align: right;
            font-size: 11px;
            margin-bottom: 15px;
        }

        .form-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            font-size: 12px;
        }

        .form-table th {
            background-color: #f0f0f0;
            border: 1px solid #333;
            padding: 6px;
            text-align: left;
            font-weight: bold;
            vertical-align: top;
            width: 20%;
        }

        .form-table td {
            border: 1px solid #333;
            padding: 6px;
            vertical-align: top;
            height: 30px;
        }

        .serial-no {
            width: 4%;
            text-align: center;
        }

        .footer {
            margin-top: 30px;
            text-align: right;
            border-top: 1px solid #333;
            padding-top: 15px;
        }

        .signature-line {
            margin-top: 40px;
            text-align: right;
        }

        .data-field {
            min-height: 28px;
            padding: 3px;
        }

        .asterisk-note {
            font-size: 10px;
            margin-top: 3px;
            font-style: italic;
        }

        .compact-data div {
            margin-bottom: 2px;
        }

        /* A4 PRINT STYLES - FIXED FOR 1 PAGE */
        @media print {
            @page {
                size: A4;
                margin: 0.5cm;
            }

            body {
                font-size: 11px;
                line-height: 1.2;
                margin: 0;
                padding: 0;
            }

            .search-section, .results-header, .no-print {
                display: none !important;
            }

            .form-container {
                max-width: 100% !important;
                box-shadow: none !important;
                border: none !important;
                padding: 15px !important;
                margin: 0 !important;
            }

            .form-table {
                font-size: 11px !important;
                margin-bottom: 15px !important;
            }

            .form-table th,
            .form-table td {
                padding: 4px !important;
                height: 25px !important;
            }

            .header {
                margin-bottom: 15px !important;
                padding-bottom: 5px !important;
            }

            .footer {
                margin-top: 20px !important;
                padding-top: 10px !important;
            }

            .signature-line {
                margin-top: 30px !important;
            }

            /* Force single page */
            .form-container {
                page-break-inside: avoid;
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>


<!-- Search Section -->
<div class="search-section no-print">
    <h2>Search Form H Applications</h2>

    <div class="filter-row">
        <div class="filter-group">
            <label for="serviceSelect">Service Name</label>
            <select id="serviceSelect">
                <option value="">Loading services...</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="districtSelect">District</label>
            <select id="districtSelect" disabled>
                <option value="">Select service first</option>
            </select>
        </div>

        <!-- ADDED CENTRE DROPDOWN -->
        <div class="filter-group">
            <label for="centreSelect">Centre Name</label>
            <select id="centreSelect" disabled>
                <option value="">Select district first</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="applicationSelect">Application</label>
            <select id="applicationSelect" disabled>
                <option value="">Select centre first</option>
            </select>
        </div>
    </div>

    <button id="searchBtn" class="search-btn" disabled>Generate Form H</button>
    <span id="loadingText" class="loading" style="display: none;">Loading Form H...</span>
</div>

<!-- Results Section -->
<div id="resultsSection" class="results-section">
    <div class="results-header no-print">
        <h2>Form H Report</h2>
        <div>
            <button id="newSearchBtn" class="new-search-btn">New Search</button>
            <button id="printBtn" class="search-btn">Print Form</button>
        </div>
    </div>

    <!-- Form H Report will be dynamically inserted here -->
    <div id="formHReport"></div>
</div>

<script>
    // DOM Elements
    const serviceSelect = document.getElementById('serviceSelect');
    const districtSelect = document.getElementById('districtSelect');
    const centreSelect = document.getElementById('centreSelect'); // ADDED
    const applicationSelect = document.getElementById('applicationSelect');
    const searchBtn = document.getElementById('searchBtn');
    const loadingText = document.getElementById('loadingText');
    const resultsSection = document.getElementById('resultsSection');
    const formHReport = document.getElementById('formHReport');
    const newSearchBtn = document.getElementById('newSearchBtn');
    const printBtn = document.getElementById('printBtn');

    // Current selections
    let currentSelections = {
        service: '',
        district: '',
        centre: '', // ADDED
        application: ''
    };

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
        loadServices();
        setupEventListeners();
    });

    function setupEventListeners() {
        serviceSelect.addEventListener('change', onServiceChange);
        districtSelect.addEventListener('change', onDistrictChange);
        centreSelect.addEventListener('change', onCentreChange); // ADDED
        applicationSelect.addEventListener('change', onApplicationChange);
        searchBtn.addEventListener('click', generateFormH);
        newSearchBtn.addEventListener('click', resetSearch);
        printBtn.addEventListener('click', () => window.print());
    }

    // Load services from NEW API
    async function loadServices() {
        try {
            const response = await fetch('/api/search/initial-data');
            const data = await response.json();

            serviceSelect.innerHTML = '<option value="">Select Service</option>';
            data.services.forEach(service => {
                const option = document.createElement('option');
                option.value = service;
                option.textContent = service;
                serviceSelect.appendChild(option);
            });
        } catch (error) {
            console.error('Error loading services:', error);
            serviceSelect.innerHTML = '<option value="">Error loading services</option>';
        }
    }

    // When service changes, load districts from NEW API
    async function onServiceChange() {
        const service = serviceSelect.value;
        currentSelections.service = service;

        if (!service) {
            resetDistrictAndBeyond();
            return;
        }

        districtSelect.disabled = true;
        districtSelect.innerHTML = '<option value="">Loading districts...</option>';
        resetCentreAndBeyond();

        try {
            const response = await fetch('/api/search/districts');
            const data = await response.json();

            districtSelect.innerHTML = '<option value="">Select District</option>';
            data.districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            });
            districtSelect.disabled = false;
        } catch (error) {
            console.error('Error loading districts:', error);
            districtSelect.innerHTML = '<option value="">Error loading districts</option>';
        }
    }

    // When district changes, load centres from NEW API
    async function onDistrictChange() {
        const district = districtSelect.value;
        currentSelections.district = district;

        if (!district) {
            resetCentreAndBeyond();
            return;
        }

        centreSelect.disabled = true;
        centreSelect.innerHTML = '<option value="">Loading centres...</option>';
        resetApplication();

        try {
            const response = await fetch(`/api/search/centres?district=${encodeURIComponent(district)}`);
            const data = await response.json();

            centreSelect.innerHTML = '<option value="">Select Centre</option>';
            data.centres.forEach(centre => {
                const option = document.createElement('option');
                option.value = centre;
                option.textContent = centre;
                centreSelect.appendChild(option);
            });
            centreSelect.disabled = false;
        } catch (error) {
            console.error('Error loading centres:', error);
            centreSelect.innerHTML = '<option value="">Error loading centres</option>';
        }
    }

    // When centre changes, load applications from NEW API
    async function onCentreChange() {
        const centre = centreSelect.value;
        currentSelections.centre = centre;

        if (!centre) {
            resetApplication();
            return;
        }

        applicationSelect.disabled = true;
        applicationSelect.innerHTML = '<option value="">Loading applications...</option>';

        try {
            const response = await fetch(`/api/search/applications?centre=${encodeURIComponent(centre)}`);
            const data = await response.json();

            applicationSelect.innerHTML = '<option value="">Select Application</option>';
            data.applicationRefNos.forEach(appRefNo => {
                const option = document.createElement('option');
                option.value = appRefNo;
                option.textContent = appRefNo;
                applicationSelect.appendChild(option);
            });
            applicationSelect.disabled = false;
        } catch (error) {
            console.error('Error loading applications:', error);
            applicationSelect.innerHTML = '<option value="">Error loading applications</option>';
        }
    }

    // When application changes, enable search button
    function onApplicationChange() {
        const application = applicationSelect.value;
        currentSelections.application = application;
        searchBtn.disabled = !application;
    }

    // Generate Form H report - DYNAMIC VERSION (UNCHANGED)
    async function generateFormH() {
        if (!currentSelections.application) return;

        loadingText.style.display = 'inline';
        searchBtn.disabled = true;

        try {
            // Load detailed Form H data
            const response = await fetch(`/form-h/api/data?applRefNo=${currentSelections.application}`);
            const formData = await response.json();

            // Display Form H dynamically
            displayFormH(formData);
            resultsSection.style.display = 'block';

            // Scroll to results
            resultsSection.scrollIntoView({ behavior: 'smooth' });

        } catch (error) {
            console.error('Error generating form:', error);
            alert('Error generating Form H report');
        } finally {
            loadingText.style.display = 'none';
            searchBtn.disabled = false;
        }
    }

    // Display Form H report dynamically - EXACTLY AS BEFORE
    function displayFormH(formData) {
        formHReport.innerHTML = `
            <div class="form-container">
                <!-- LOGO INSIDE FORM H - FIXED PATH -->
                <div style="text-align: center; margin-bottom: 15px;">
                    <img src="/images/Flag_of_Odisha.svg.png" alt="Logo" style="height: 50px;">
                </div>

                <!-- Page Header -->
                <div class="page-info">
                    Page No. <span>1</span>
                </div>

                <div class="header">
                    <div class="form-title">Form - H</div>
                    <div class="form-subtitle">[See Rule 9(5)]</div>
                    <div style="font-size: 14px; font-weight: bold; margin-top: 8px; line-height: 1.3;">
                        FORM FOR MAINTENANCE OF PERMANENT RECORD OF APPLICATIONS FOR GRANT/REJECTION OF REGISTRATION<br>
                        UNDER THE PRE-NATAL DIAGNOSTIC TECHNIQUES (REGULATION AND PREVENTION OF MISUSE) ACT, 1994
                    </div>
                </div>

                <!-- Main Form Table - COMPACT FOR A4 -->
                <table class="form-table">
                    <tr>
                        <th class="serial-no">1. Sl. No</th>
                        <td class="serial-no">${formData.serialNumber || '1'}</td>
                    </tr>

                    <tr>
                        <th>2. File number of Appropriate Authority</th>
                        <td class="data-field">${formData.fileNumber || '-'}</td>
                    </tr>

                    <tr>
                        <th>3. Date of receipt of application for grant of registration</th>
                        <td class="data-field">${formData.receiptDate || '-'}</td>
                    </tr>

                    <tr>
                        <th>4. Name, Address, Phone/Fax etc. of Applicant</th>
                        <td class="data-field compact-data">
                            <div><strong>${formData.applicantName || '-'}</strong></div>
                            <div>${formData.applicantAddress || '-'}</div>
                            ${formData.phoneNumber && formData.phoneNumber !== 'NA' ? `<div>Phone: ${formData.phoneNumber}</div>` : ''}
                            ${formData.email && formData.email !== 'NA' ? `<div>Email: ${formData.email}</div>` : ''}
                            ${formData.fax && formData.fax !== 'NA' ? `<div>Fax: ${formData.fax}</div>` : ''}
                            ${formData.applicantDetails ? `<div style="margin-top: 3px;">${formData.applicantDetails}</div>` : ''}
                        </td>
                    </tr>

                    <tr>
                        <th>
                            5. Name and address(es) of Genetic Counselling Centre* /
                            Genetic Laboratory* / Genetic Clinic* / Ultrasound Clinic* /
                            Imaging Centre*
                            <div class="asterisk-note">*Strike out whichever is not applicable</div>
                        </th>
                        <td class="data-field compact-data">
                            <div><strong>${formData.facilityName || '-'}</strong></div>
                            <div>${formData.facilityAddress || '-'}</div>
                            ${formData.facilityType ? `<div>Type: ${formData.facilityType}</div>` : ''}
                            ${formData.district ? `<div>District: ${formData.district}</div>` : ''}
                        </td>
                    </tr>

                    <tr>
                        <th>
                            6. Date of consideration by Advisory Committee and
                            recommendation of Advisory Committee, in summary
                        </th>
                        <td class="data-field">
                            ${formData.advisoryCommitteeDate && formData.advisoryCommitteeDate !== 'NA' ?
                                `<div><strong>Date: </strong>${formData.advisoryCommitteeDate}</div>` : ''}
                            ${formData.recommendationSummary && formData.recommendationSummary !== 'NA' ?
                                `<div style="margin-top: 5px;"><strong>Recommendation Summary:</strong><br>${formData.recommendationSummary}</div>` : ''}
                            ${formData.advisorySummary && formData.advisorySummary !== 'NA' ?
                                `<div style="margin-top: 5px;"><strong>Advisory Summary:</strong><br>${formData.advisorySummary}</div>` : ''}
                            ${(!formData.advisoryCommitteeDate || formData.advisoryCommitteeDate === 'NA') &&
                              (!formData.recommendationSummary || formData.recommendationSummary === 'NA') ? '-' : ''}
                        </td>
                    </tr>

                    <tr>
                        <th>
                            7. Outcome of application (state granted/rejected and date of
                            issue of orders - record date of issue of order in Form B or Form C)
                        </th>
                        <td class="data-field compact-data">
                            ${formData.outcome ? `<div><strong>Status: </strong>${formData.outcome}</div>` : ''}
                            ${formData.orderDate && formData.orderDate !== 'NA' ?
                                `<div><strong>Order Date: </strong>${formData.orderDate}</div>` : ''}
                            ${formData.formType && formData.formType !== 'NA' ?
                                `<div><strong>Form Type: </strong>${formData.formType}</div>` : ''}
                        </td>
                    </tr>

                    <tr>
                        <th>8. Registration number allotted and date of expiry of registration</th>
                        <td class="data-field compact-data">
                            ${formData.registrationNumber ?
                                `<div><strong>Registration No: </strong>${formData.registrationNumber}</div>` : ''}
                            ${formData.expiryDate && formData.expiryDate !== 'NA' ?
                                `<div><strong>Expiry Date: </strong>${formData.expiryDate}</div>` : ''}
                        </td>
                    </tr>

                    <tr>
                        <th>9. Renewals (date of renewal and renewed upto)</th>
                        <td class="data-field">
                            ${formData.renewalDetails && formData.renewalDetails !== 'NA' ?
                                formData.renewalDetails : '-'}
                        </td>
                    </tr>

                    <tr>
                        <th>10. File number in which renewals dealt</th>
                        <td class="data-field">
                            ${formData.renewalFileNumber && formData.renewalFileNumber !== 'NA' ?
                                formData.renewalFileNumber : '-'}
                        </td>
                    </tr>

                    <tr>
                        <th>11. Additional information, if any</th>
                        <td class="data-field" style="font-size: 11px;">${formData.additionalInfo || '-'}</td>
                    </tr>
                </table>

                <!-- Footer and Signature - COMPACT -->
                <div class="footer">
                    <div class="page-info">Page No. <span>1</span></div>
                    <div class="signature-line">
                        <div>Name, Designation & Signature of Appropriate Authority</div>
                        <div style="margin-top: 50px; border-top: 1px solid #333; width: 250px; margin-left: auto;">
                            <div style="text-align: center; padding-top: 3px; font-size: 11px;">
                                <span>Dr. S. K. Sharma</span><br>
                                <span>Chief District Medical Officer</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Print Button -->
            <div style="text-align: center; margin-top: 15px;" class="no-print">
                <button onclick="window.print()" style="padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">
                    Print Form
                </button>
            </div>
        `;
    }

    // Reset functions
    function resetDistrictAndBeyond() {
        districtSelect.disabled = true;
        districtSelect.innerHTML = '<option value="">Select service first</option>';
        resetCentreAndBeyond();
    }

    function resetCentreAndBeyond() {
        centreSelect.disabled = true;
        centreSelect.innerHTML = '<option value="">Select district first</option>';
        resetApplication();
    }

    function resetApplication() {
        applicationSelect.disabled = true;
        applicationSelect.innerHTML = '<option value="">Select centre first</option>';
        currentSelections.application = '';
        searchBtn.disabled = true;
    }

    // Reset search form
    function resetSearch() {
        serviceSelect.value = '';
        districtSelect.value = '';
        centreSelect.value = '';
        applicationSelect.value = '';
        resetDistrictAndBeyond();
        resultsSection.style.display = 'none';
        currentSelections = { service: '', district: '', centre: '', application: '' };
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>
</body>
</html>


/* Minister Section - Fixed Alignment */
.header-right {
    display: flex;
    align-items: center;
    gap: 25px;
    margin-left: auto;
}

.edistrict-text {
    font-size: 0.9rem;
    color: #1e3c72;
    font-weight: bold;
    text-align: right;
    white-space: nowrap;
}

.minister {
    display: flex;
    align-items: center;
    gap: 12px;
    text-align: right;
}

.minister a {
    text-decoration: none;
    color: #1e3c72;
    font-weight: bold;
    text-align: right;
    line-height: 1.3;
    white-space: nowrap;
}

.minister a span {
    display: block;
    font-size: 0.8rem;
    font-weight: normal;
    color: #2a5298;
    font-style: italic;
}

.minister img {
    width: 70px;
    height: 70px;
    border-radius: 6px;
    border: 2px solid #ffd700;
    object-fit: cover;
}

/* Responsive Design for Minister Section */
@media (max-width: 768px) {
    .header-right {
        flex-direction: column;
        gap: 10px;
        margin-left: 0;
        width: 100%;
        text-align: center;
    }
    
    .minister {
        justify-content: center;
        text-align: center;
    }
    
    .minister a {
        text-align: center;
    }
    
    .edistrict-text {
        text-align: center;
    }
    
    .minister img {
        width: 60px;
        height: 60px;
    }
}

.minister {
    display: flex;
    align-items: center;
    gap: 10px;
    text-align: left;
}

.minister a {
    order: 1;
}

.minister img {
    order: 2;
}






































